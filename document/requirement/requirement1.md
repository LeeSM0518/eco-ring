# 1차 요구 사항 설계

# 기능

* 회원 CRUD
* 디바이스 위치 저장
* 디바이스에서 측정한 미세먼지 농도, 측정 시간 저장
* 지도에 미세 먼지 농도를 시각화
  * 카카오 맵 API 사용

<br>

# 흐름도

## 미세먼지 농도 측정 및 저장

![image](https://user-images.githubusercontent.com/43431081/79039807-c8538000-7c1e-11ea-8c87-707a1c4a2d87.png)

1. 센서로부터 미세먼지 농도를 측정한다.

2. 라즈베리 파이는 측정한 농도를 디스플레이에 시각화한다.

3. 라즈베리 파이는 Flask 라는 파이썬 웹 프레임워크를 통해서 미세먼지 농도와 위치 데이터를 전송한다.

4. 미세먼지 농도 데이터는 인터넷을 통해 전송된다.

5. 전송된 데이터는 Spring이라는 자바 웹 프레임워크가 받게 되고 받은 데이터를 DB에 저장한다.

<br>

## 사용자

![image](https://user-images.githubusercontent.com/43431081/79039852-1b2d3780-7c1f-11ea-9919-6df5d4382923.png)

1. 사용자는 인터넷을 통해 미세먼지 정보를 나타내는 페이지를 요청한다.

2. Vue.js 라는 UI 프레임워크가 사용자가 요청한 페이지에 필요한 데이터를 Spring 자바 프레임워크에게 요청한다.

3. Spring은 Vue로 부터 요청된 데이터를 PostgreSQL 이라는 DB로부터 가져온다.

4. Spring 가져온 데이터를 Vue에게 반환하고 Vue는 페이지에 그 데이터들을 나타낸 다음에 웹을 통해 사용자에게 반환한다.

<br>

# 하위 도메인(Flask)

* **dust**
* **device**

<br>

## dust

dust(미세먼지)는 디바이스에서 미세먼지 농도를 측정한 데이터이다.

| 번호 | 요구사항                  | 상세내용                                                   |
| ---- | ------------------------- | ---------------------------------------------------------- |
| 1    | 측정 데이터를 서버로 전송 | 미세먼지 농도, 측정 시간, 디바이스 번호를 JSON 형태로 전송 |

<br>

### device

device는 디바이스를 추가하기 위한 도메인.

| 번호 | 요구사항                                       | 상세내용                                                     |
| ---- | ---------------------------------------------- | ------------------------------------------------------------ |
| 1    | 라즈베리 파이에서 디바이스를 등록 요청을 한다. | 측정 위치를 JSON으로 서버에서 전달하면 서버는 디바이스 번호를 생성해서 반환해준다. |
| 2    | 라즈베리 파이에서 디바이스 삭제 요청을 한다.   | 자신의 번호를 JSON으로 서버에 전달하면 서버는 디바이스를 제거한다. |

<br>

# 하위 도메인(Vue)

* **auth**
  * login
  * logout
  * signup
* **map**
  * search
  * list
* **location**
* **admin**
  * devices

<br>

## auth

auth(인증)은 로그인과 로그아웃, 회원 가입의 상위 도메인에 해당한다.

<br>

### login

로그인

| 속성 | 설명          | 상세내용                       |
| ---- | ------------- | ------------------------------ |
| 1    | 로그인 페이지 | 아이디, 비밀번호를 통해 로그인 |

<br>

### logout

로그아웃

| 번호 | 요구사항 | 상세내용                          |
| ---- | -------- | --------------------------------- |
| 1    | 로그아웃 | 로그아웃하고 로그인 페이지로 이동 |

<br>

### signup

회원가입

| 번호 | 요구사항        | 상세내용                               |
| ---- | --------------- | -------------------------------------- |
| 1    | 회원가입 페이지 | 이름, 아이디, 비밀번호을 통해 회원가입 |

<br>

## map

map(지도)은 위치 검색, 미세먼지 측정 위치 목록 보기의 상위 도메인이다.

<br>

### search

search(검색)는 미세먼지 측정 위치를 검색한다.

| 번호 | 요구사항                  | 상세내용                                       |
| ---- | ------------------------- | ---------------------------------------------- |
| 1    | 미세먼지 측정 위치를 검색 | 미세먼지 측정 위치를 검색하는 바를 노출시킨다. |

<br>

### list

list(목록)는 미세먼지 측정 위치의 목록을 보여준다.

| 번호 | 요구사항                       | 상세내용                                                |
| ---- | ------------------------------ | ------------------------------------------------------- |
| 1    | 미세먼지 측정 목록을 보여준다. | 사이드 바를 노출시키면서 미세먼지 측정 목록을 보여준다. |

<br>

## location

location(위치)은 해당 위치의 미세먼지의 상세한 농도나 주소 정보 등의 자세한 정보를 볼 수 있다.

| 번호 | 요구사항                     | 상세내용                          |
| ---- | ---------------------------- | --------------------------------- |
| 1    | 해당 위치의 자세한 정보 출력 | 미세먼지 농도, 주소, 측정 시간 등 |

<br>

## admin

admin(관리자)은 디바이스 정보를 CRUD 할 수 있는 도메인이다.

<br>

### device

device 정보를 CRUD한다.

| 번호 | 요구사항                    | 상세내용                                        |
| ---- | --------------------------- | ----------------------------------------------- |
| 1    | 디바이스 정보를 추가 페이지 | 디바이스 번호, 위치, 최근 미세먼지 측정 날짜 등 |
| 2    | 디바이스 정보를 조회 페이지 | "                                               |
| 3    | 디바이스 정보를 변경 페이지 | "                                               |
| 4    | 디바이스 정보를 삭제 페이지 | 디바이스 정보 삭제                              |

<br>

# 하위 도메인(Spring)

* **auth**
  * login
  * logout
  * signup
* **device**
* **dust**

<br>

## auth

auth(인증)은 로그인과 로그아웃, 회원 가입의 상위 도메인에 해당한다.

<br>

### login

로그인

| 번호 | 요구사항           | 상세내용                                          |
| ---- | ------------------ | ------------------------------------------------- |
| 1    | 로그인을 처리한다. | 아이디, 비밀번호를 JSON 형태로 입력받고 로직 처리 |

<br>

### logout

로그아웃

| 번호 | 요구사항             | 상세내용    |
| ---- | -------------------- | ----------- |
| 1    | 로그아웃을 처리한다. | 세션 초기화 |

<br>

### signup

회원가입

| 번호 | 요구사항              | 상세내용                                                     |
| ---- | --------------------- | ------------------------------------------------------------ |
| 1    | 회원 가입을 처리한다. | 이름, 아이디(이메일), 비밀번호를 JSON 형태로 입력받고 로직 처리 |

<br>

## device

device(디바이스)는 디바이스 정보를 CRUD 할 수 있다.

| 번호 | 요구사항                  | 상세내용                                           |
| ---- | ------------------------- | -------------------------------------------------- |
| 1    | 디바이스 정보를 조회한다. | DB로부터 디바이스 정보를 조회하고 JSON 형태로 변환 |
| 2    | 디바이스 정보를 추가한다. | 디바이스 정보를 생성해서 DB에 추가                 |
| 3    | 디바이스 정보를 변경한다. | 디바이스 정보를 변경해서 DB 수정                   |
| 4    | 디바이스 정보를 삭제한다. | 디바이스 정보를 DB에서 삭제                        |

<br>

## dust

dust(미세먼지)는 미세먼지에 대한 정보를 조회하거나 추가한다.

| 번호 | 요구사항                  | 상세내용                               |
| ---- | ------------------------- | -------------------------------------- |
| 1    | 미세먼지 정보를 조회한다. | 미세먼지 농도, 측정 시간, 측정 위치 등 |
| 2    | 미세먼지 정보를 추가한다. | "                                      |